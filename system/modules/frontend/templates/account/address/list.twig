{#
    Displays a list of user addresses

    To see available variables:
        - without enabling Twig debug mode: {{ var_dump() }}
        - using native Twig debugger (Debug mode must be enabled): {{ dump() }}

    @package GPL Cart core
    @author Iurii Makukh <gplcart.software@gmail.com>
    @copyright Copyright (c) 2015, Iurii Makukh
    @license https://www.gnu.org/licenses/gpl.html GNU/GPLv3
    @link http://gplcart.com Support, modules, demo
#}
<div class="panel panel-default">
  <div class="panel-body">
    <div class="row">
      <div class="col-md-3">
        <div class="list-group">
          <a href="{{ url('account/' ~ user.user_id) }}" class="list-group-item">
            <h4 class="list-group-item-heading h5"><b>{{ truncate(user.name, 20) }}</b></h4>
            <p class="list-group-item-text">{{ user.email }}</p>
          </a>
          <a href="{{ url('account/' ~ user.user_id ~ '/address') }}" class="list-group-item active disabled">
            <h4 class="list-group-item-heading h5">{{ text('Addresses') }}</h4>
            <p class="list-group-item-text">{{ text('View and manage addressbook') }}</p>
          </a>
          <a class="list-group-item" href="{{ url('account/' ~ user.user_id ~ '/edit') }}">
            <h4 class="list-group-item-heading h5">{{ text('Settings') }}</h4>
            <p class="list-group-item-text">{{ text('Edit account details') }}</p>
          </a>
        </div>
        <a class="btn btn-default" href="{{ url('logout') }}">
          <span class="fa fa-sign-out"></span> {{ text('Log out') }}
        </a>
      </div>
      <div class="col-md-9">
        {% if addresses is not empty %}
            <div class="row addresses">
              {% for address_id,address in addresses %}
                  <div class="col-md-4">
                    <div class="panel panel-default address">
                      <div class="panel-heading clearfix">
                        <a class="btn btn-default btn-sm pull-right" title="{{ text('Delete') }}" href="{{ url(false, {'delete': address_id}) }}">
                          <i class="fa fa-trash"></i>
                        </a>
                      </div>
                      <div class="panel-body">
                        <table class="table table-condensed address">
                          {% for label,value in address %}
                              <tr>
                                <td>{{ not label matches '/^\\d+$/' ? label}}</td>
                                <td>{{ value }}</td>
                              </tr>
                          {% endfor %}
                        </table>
                      </div>
                    </div>
                  </div>
              {% endfor %}
            </div>
        {% endif %}
        <div class="row">
          <div class="col-md-12">
            {% if addresses is empty %}
                <p>{{ text('You have no saved addresses yet') }}</p>
            {% endif %}
            <a class="btn btn-default" href="{{ url('account/' ~ user.user_id ~ '/address/add') }}">
              {{ text('Add new address') }}
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
